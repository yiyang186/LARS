{% extends 'base.html' %}
    {% block content %}
    <div class="row">
        <div class="col-md-9">
            <div id="main" style="width: 800px;height:800px;"></div>
        </div>
        <div class="col-md-3">
            <div class="btn-group-vertical">
            {% if mycolumns %}
                {% for col in mycolumns %}
                    {% if forloop.first %}
                    {% else %}
                        <button name="{{ col }}" type="button" class="btn btn-default" onclick="draw(this.name)">{{ col }}</button>
                    {% endif%}
                {% endfor %}
            {% else %}
                <p>No hardlanding are available.</p>
            {% endif %}
            </div>
        </div>

        <script type="text/javascript">

            // 基于准备好的dom，初始化echarts实例
            var myChart = echarts.init(document.getElementById('main'));

            myChart.setOption({
                series : [
                    {
                        name: '访问来源',
                        type: 'pie',
                        radius: '55%',
                        itemStyle: {
                            normal: {
                                shadowBlur: 200,
                                shadowColor: 'rgba(0, 0, 0, 0.5)'
                            },
                            emphasis: {
                                shadowBlur: 200,
                                shadowColor: 'rgba(0, 0, 0, 1.5)'
                            }
                        },
                        data:[
                            {value:400, name:'搜索引擎'},
                            {value:335, name:'直接访问'},
                            {value:310, name:'邮件营销'},
                            {value:274, name:'联盟广告'},
                            {value:235, name:'视频广告'}
                        ]
                    }
                ]
            });
        
            function draw(col) {
                $.getJSON("{% url 'hardlanding:index' %}", {'col': col}, function (data) {
                    myChart.setOption({
                        series: [{
                            name: col,
                            data: data
                        }]
                    });
                });
            }
        </script>
    {% endblock %}